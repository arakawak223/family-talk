# クイックテストガイド

本番環境で家族が使用する前に、最小限のテストを実行する手順です。

詳細なテストは `TESTING_GUIDE.md` を参照してください。

## テスト1: Webアプリの基本動作確認

### 1.1 Webアプリにアクセス

1. Vercelから発行されたURLにアクセス
   - 例: `https://family-talk-xxx.vercel.app`

2. ページが正常に表示されることを確認
   - [ ] トップページが表示される
   - [ ] ログイン/新規登録ボタンが表示される

### 1.2 新規ユーザー登録

1. 「新規登録」をクリック
2. テスト用のメールアドレスとパスワードを入力
   - メール: `test1@example.com`（自分のメールアドレスを使用）
   - パスワード: 8文字以上
3. 「登録」をクリック
4. **期待結果**:
   - [ ] 登録完了メッセージが表示される
   - [ ] ダッシュボードまたはオンボーディング画面に遷移

### 1.3 ログアウト・ログイン

1. ユーザーメニューから「ログアウト」
2. トップページに戻ることを確認
3. 「ログイン」をクリック
4. 登録したメールアドレスとパスワードを入力
5. **期待結果**:
   - [ ] ログイン成功
   - [ ] ダッシュボードに遷移

### 1.4 プロフィール編集

1. ダッシュボードから「プロフィール」をクリック
2. 表示名を入力（例: テストユーザー1）
3. 「保存」をクリック
4. **期待結果**:
   - [ ] 保存成功メッセージが表示される

## テスト2: 家族グループの作成と参加

### 2.1 家族グループの作成

1. 「家族グループを作成」をクリック
2. グループ名を入力（例: テスト家族）
3. 「作成」をクリック
4. **期待結果**:
   - [ ] 家族グループが作成される
   - [ ] 招待コードが表示される（メモする）

### 2.2 別のユーザーで参加

1. 別のブラウザまたはシークレットウィンドウで同じURLにアクセス
2. 別のメールアドレスで新規登録
   - メール: `test2@example.com`
3. 「家族グループに参加」をクリック
4. 先ほどの招待コードを入力
5. **期待結果**:
   - [ ] 家族グループに参加
   - [ ] メンバー一覧に表示される

## テスト3: 音声メッセージの送受信（Webアプリ）

### 3.1 質問の選択

1. ユーザー1のアカウントでログイン
2. 「メッセージを送る」をクリック
3. 質問カテゴリと気持ちを選択
4. 質問候補から1つ選択
5. **期待結果**:
   - [ ] 録音画面に遷移

### 3.2 音声の録音

1. マイク権限を許可
2. 「録音開始」をクリック
3. 5秒程度話す
4. 「録音停止」をクリック
5. 「再生」で確認
6. **期待結果**:
   - [ ] 録音が成功
   - [ ] 再生できる

### 3.3 メッセージの送信

1. 送信先でユーザー2を選択
2. 「送信」をクリック
3. **期待結果**:
   - [ ] 送信完了メッセージが表示される

### 3.4 メッセージの受信

1. ユーザー2のアカウントでログイン
2. ダッシュボードのメッセージ一覧を確認
3. メッセージをクリック
4. 「再生」をクリック
5. **期待結果**:
   - [ ] メッセージが表示される
   - [ ] 音声が再生される

## テスト4: モバイルアプリの基本動作確認（Android）

⚠️ Android Studioと実機またはエミュレーターが必要です。

### 4.1 アプリのビルドとインストール

```bash
cd FamilyTalk
npm install
npm run android
```

### 4.2 ログインテスト

1. アプリが起動することを確認
2. Webアプリで作成したアカウントでログイン
3. **期待結果**:
   - [ ] ログイン成功
   - [ ] ホーム画面が表示される

### 4.3 音声録音テスト

1. マイク権限を許可
2. 「Select Question」から質問を選択
3. マイクボタンを長押しして録音
4. ボタンを離して停止
5. 「Play」で再生確認
6. **期待結果**:
   - [ ] 録音できる
   - [ ] 再生できる

## エラー時の対処

### Webアプリがアクセスできない

**確認事項**:
- Vercelのデプロイが成功しているか
- URLが正しいか
- ブラウザのキャッシュをクリア

### ログイン・登録ができない

**確認事項**:
1. Supabase Dashboard → Authentication → Settings
   - Site URL が正しいか
   - Redirect URLs が設定されているか
2. Vercel の環境変数が正しいか
3. ブラウザのコンソールでエラーを確認

### 音声が録音できない

**確認事項**:
- ブラウザまたはアプリがマイク権限を持っているか
- HTTPSでアクセスしているか（HTTPでは録音不可）
- デバイスのマイクが正常に動作しているか

### メッセージが送信できない

**確認事項**:
1. Supabase の RLS ポリシーが設定されているか
2. Storage バケットが作成されているか
3. ブラウザのコンソールでエラーを確認

## 簡易チェックリスト

最小限の動作確認:

### Webアプリ
- [ ] トップページが表示される
- [ ] ユーザー登録ができる
- [ ] ログインができる
- [ ] 家族グループが作成できる
- [ ] 音声メッセージが送信できる
- [ ] 音声メッセージが受信・再生できる

### モバイルアプリ（余裕があれば）
- [ ] アプリが起動する
- [ ] ログインができる
- [ ] 音声が録音できる
- [ ] 音声が再生できる

## 次のステップ

### すべてのテストが成功した場合

おめでとうございます！アプリは本番環境で使用可能です。

1. 家族メンバーを招待
2. 実際に音声メッセージを送り合う
3. フィードバックを収集

### 問題が見つかった場合

1. エラーメッセージをメモする
2. ブラウザのコンソールログを確認
3. 該当する設定ガイドを参照:
   - `VERCEL_DEPLOY_STEPS.md` - Webアプリ
   - `SUPABASE_VERIFICATION_STEPS.md` - Supabase
   - `FamilyTalk/FIREBASE_RULES_DEPLOY.md` - Firebase
4. 問題が解決しない場合は詳細なテストガイドを参照:
   - `TESTING_GUIDE.md`

## 詳細なテストが必要な場合

本格的な本番環境デプロイの前に、すべての機能を徹底的にテストしたい場合:

→ `TESTING_GUIDE.md` を参照してください。

以下の機能を含む包括的なテストケースがあります:
- ユーザー登録・ログイン・ログアウト
- プロフィール編集・アバターアップロード
- 家族グループの作成・参加・管理
- 音声メッセージの録音・送信・受信・再生
- グループメッセージ
- 関西弁機能
- エラーハンドリング
- パフォーマンステスト
- セキュリティテスト

## 参考ドキュメント

- `VERCEL_DEPLOY_STEPS.md` - Webアプリのデプロイ手順
- `FamilyTalk/FIREBASE_RULES_DEPLOY.md` - Firebaseセキュリティルール
- `SUPABASE_VERIFICATION_STEPS.md` - Supabase設定確認
- `TESTING_GUIDE.md` - 詳細なテストガイド
- `FamilyTalk/ANDROID_BUILD_GUIDE.md` - Androidビルド手順
- `FamilyTalk/IOS_BUILD_GUIDE.md` - iOSビルド手順